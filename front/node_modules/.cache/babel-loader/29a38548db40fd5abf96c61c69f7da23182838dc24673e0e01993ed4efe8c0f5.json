{"ast":null,"code":"var _jsxFileName = \"/Users/seongsuk/SSAP-IDE-FrontEnd/front/src/components/chat/Chat.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport { API_ENDPOINT, getMessages, sendMessage } from \"../../api/chatAPI\";\nimport { IoIosCloseCircleOutline } from \"react-icons/io\";\nimport { BiSearch, BiSolidUser } from \"react-icons/bi\";\nimport { BsChatSquareDots } from \"react-icons/bs\";\nimport \"./chat.scss\";\nimport ChatUserList from \"./chatUserList/ChatUserList\";\nimport { useQueryClient } from \"react-query\";\n\n// TODO 컨테이너 고유ID를 roomID로 적용시켜야함\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst roomId = \"aa0cea7dcd81cbea0fe690aa72b8520b6dfce49e35e418c0a0c32f88f24a1056 \";\n// const user = { email: \"mater@gmail.com\", name: \"master\" };\n// const user = { email: \"mater2@naver.com\", name: \"master2\" };\nconst user = {\n  email: \"mater3@naver.com\",\n  name: \"master3\"\n};\nconst name = user.name;\nconst email = user.email;\nconst Chat = () => {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [userName, setUserName] = useState(name);\n  const [userEmail, setUserEmail] = useState(email);\n  const [messages, setMessages] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const socketRef = useRef();\n  const [isVisible, setIsVisible] = useState(false);\n  const [newMessageArrived, setNewMessageArrived] = useState(false);\n  const [showUserList, setShowUserList] = useState(false);\n  const queryClient = useQueryClient();\n  const {\n    data: chatData,\n    isLoading,\n    isError\n  } = useQuery([\"getMessages\", roomId],\n  // 쿼리 키\n  () => getMessages(roomId),\n  // 데이터를 가져오는 함수\n  {\n    enabled: !!roomId,\n    // roomId가 존재할 때만 활성화\n    onSuccess: data => {\n      setMessages(data);\n    },\n    retry: 3,\n    // 실패 시 최대 3번 재시도\n    retryDelay: attempt => Math.min(attempt * 1000, 3000) // 재시도 사이의 지연 시간 설정\n  });\n  // console.log(\"getMessages\", chatData);\n\n  //TODO\n  const sendMessageMutation = useMutation(sendMessage, {\n    onSuccess: data => {\n      // 메시지 전송에 성공하면 데이터를 재요청\n      queryClient.invalidateQueries([\"getMessages\", roomId]);\n      console.log(\"메세지 저장 성공:\", data);\n    },\n    onError: error => {\n      console.error(\"메세지 저장 실패:\", error);\n    }\n  });\n\n  // 소켓\n  useEffect(() => {\n    if (!userEmail) return;\n\n    // Socket.IO 클라이언트 초기화\n    const socket = socketIOClient(API_ENDPOINT, {\n      //cors 체크\n      withCredentials: true\n    });\n    socket.emit(\"setUserInfo\", {\n      email: email,\n      name: name\n    });\n    console.log(\"setUserInfo: \", email, name);\n    socket.emit(\"joinRoom\", roomId, email);\n\n    // 서버로부터 메시지를 받으면 상태 업데이트\n    const onReceiveMessage = data => {\n      const {\n        name,\n        message\n      } = data;\n      setMessages(prevMessages => [...prevMessages, {\n        name,\n        message\n      }]);\n\n      // 본인 확인\n      const isOwner = data.email === userEmail;\n      console.log(\"data.email:\", data.email, \"userEmail\", userEmail);\n      console.log(\"isOwner:\", isOwner, \"isVisible:\", isVisible);\n\n      // 새로운 메세지 도착하면 알림\n      if (!isOwner && !isVisibleRef.current) {\n        setNewMessageArrived(true);\n        queryClient.invalidateQueries(\"getMessages\"); // 새로운 메세지 도착시 채팅 내용 가져오기\n      }\n    };\n\n    socket.on(\"receiveMessage\", data => {\n      onReceiveMessage(data);\n      queryClient.invalidateQueries(\"getMessages\");\n    }); // TODO: 수정됨\n\n    socketRef.current = socket;\n\n    // 소켓 연결 종료\n    return () => {\n      socket.off(\"receiveMessage\", onReceiveMessage);\n      socketRef.current.disconnect();\n    };\n  }, [roomId, email, name]);\n\n  // 메세지 엡뎃 확인용\n  useEffect(() => {\n    console.log(\"Updated messages:\", messages, \"UpdatednewMessageArrived:\", newMessageArrived);\n  }, [messages, newMessageArrived]);\n\n  // 채팅창 열기\n  const handleToggleChat = () => {\n    setNewMessageArrived(false);\n    setIsVisible(prevIsVisible => !prevIsVisible); // isVisible 상태 토글\n  };\n\n  // 채팅 메세지 전송\n  const handleSendMessage = async e => {\n    if (e) e.preventDefault();\n    if (message.trim() === \"\") return;\n    const data = {\n      email,\n      name,\n      message\n    };\n    console.log(\"handleSendMessage: \", data);\n    try {\n      const result = await sendMessageMutation.mutateAsync(data);\n      if (result.success) {\n        setMessage(\"\");\n      }\n    } catch (error) {\n      console.error(\"메세지 전송 오류:\", error);\n    }\n  };\n\n  // textarea 엔터 키 전송\n  const handleTextareaKeyPress = e => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  // 채팅창 열림 여부 최신 상태 업뎃 유지\n  const isVisibleRef = useRef(isVisible);\n  useEffect(() => {\n    isVisibleRef.current = isVisible;\n    console.log(\"isVisible:\", isVisible); // isVisible 상태 확인용\n  }, [isVisible]);\n\n  // 접속자 창 toggle\n  const toggleUserList = () => {\n    setShowUserList(prev => !prev);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat_container\",\n    children: [isVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-inner\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-top\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\uCC44\\uD305\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"top_right\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: /*#__PURE__*/_jsxDEV(BiSearch, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: toggleUserList,\n              children: /*#__PURE__*/_jsxDEV(BiSolidUser, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"msg-wrap\",\n          children: messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `message ${msg.email === userEmail ? \"msg_right\" : \"msg_left\"}`,\n            children: [msg.email === userEmail ? \"\" : /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: msg.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 51\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: msg.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"msg-form\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSendMessage,\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: message,\n              autoFocus: true,\n              onChange: e => setMessage(e.target.value),\n              onKeyPress: handleTextareaKeyPress\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              children: \"\\uC804\\uC1A1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }, this), showUserList && /*#__PURE__*/_jsxDEV(ChatUserList, {\n        userName: userName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 28\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: `chat-button ${isVisible ? \"close\" : \"open\"} ${newMessageArrived && \"bounce-animation\"}`,\n      onClick: handleToggleChat,\n      children: [isVisible ? /*#__PURE__*/_jsxDEV(IoIosCloseCircleOutline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 22\n      }, this) : /*#__PURE__*/_jsxDEV(BsChatSquareDots, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 52\n      }, this), newMessageArrived && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"notification\",\n        children: \"!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 31\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 167,\n    columnNumber: 5\n  }, this);\n};\n_s(Chat, \"J5zQ8npYlkSSOUFW8XXMjFXNm9w=\", true, function () {\n  return [useQueryClient];\n});\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","socketIOClient","API_ENDPOINT","getMessages","sendMessage","IoIosCloseCircleOutline","BiSearch","BiSolidUser","BsChatSquareDots","ChatUserList","useQueryClient","jsxDEV","_jsxDEV","roomId","user","email","name","Chat","_s","users","setUsers","userName","setUserName","userEmail","setUserEmail","messages","setMessages","message","setMessage","socketRef","isVisible","setIsVisible","newMessageArrived","setNewMessageArrived","showUserList","setShowUserList","queryClient","data","chatData","isLoading","isError","useQuery","enabled","onSuccess","retry","retryDelay","attempt","Math","min","sendMessageMutation","useMutation","invalidateQueries","console","log","onError","error","socket","withCredentials","emit","onReceiveMessage","prevMessages","isOwner","isVisibleRef","current","on","off","disconnect","handleToggleChat","prevIsVisible","handleSendMessage","e","preventDefault","trim","result","mutateAsync","success","handleTextareaKeyPress","key","shiftKey","toggleUserList","prev","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","msg","index","onSubmit","value","autoFocus","onChange","target","onKeyPress","type","_c","$RefreshReg$"],"sources":["/Users/seongsuk/SSAP-IDE-FrontEnd/front/src/components/chat/Chat.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport { API_ENDPOINT, getMessages, sendMessage } from \"../../api/chatAPI\";\nimport { IoIosCloseCircleOutline } from \"react-icons/io\";\nimport { BiSearch, BiSolidUser } from \"react-icons/bi\";\nimport { BsChatSquareDots } from \"react-icons/bs\";\nimport \"./chat.scss\";\nimport ChatUserList from \"./chatUserList/ChatUserList\";\nimport { useQueryClient } from \"react-query\";\n\n// TODO 컨테이너 고유ID를 roomID로 적용시켜야함\nconst roomId =\n  \"aa0cea7dcd81cbea0fe690aa72b8520b6dfce49e35e418c0a0c32f88f24a1056 \";\n// const user = { email: \"mater@gmail.com\", name: \"master\" };\n// const user = { email: \"mater2@naver.com\", name: \"master2\" };\nconst user = { email: \"mater3@naver.com\", name: \"master3\" };\nconst name = user.name;\nconst email = user.email;\n\nconst Chat = () => {\n  const [users, setUsers] = useState([]);\n  const [userName, setUserName] = useState(name);\n  const [userEmail, setUserEmail] = useState(email);\n  const [messages, setMessages] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const socketRef = useRef();\n\n  const [isVisible, setIsVisible] = useState(false);\n  const [newMessageArrived, setNewMessageArrived] = useState(false);\n  const [showUserList, setShowUserList] = useState(false);\n\n  const queryClient = useQueryClient();\n  const {\n    data: chatData,\n    isLoading,\n    isError,\n  } = useQuery(\n    [\"getMessages\", roomId], // 쿼리 키\n    () => getMessages(roomId), // 데이터를 가져오는 함수\n    {\n      enabled: !!roomId, // roomId가 존재할 때만 활성화\n      onSuccess: (data) => {\n        setMessages(data);\n      },\n      retry: 3, // 실패 시 최대 3번 재시도\n      retryDelay: (attempt) => Math.min(attempt * 1000, 3000), // 재시도 사이의 지연 시간 설정\n    },\n  );\n  // console.log(\"getMessages\", chatData);\n\n  //TODO\n  const sendMessageMutation = useMutation(sendMessage, {\n    onSuccess: (data) => {\n      // 메시지 전송에 성공하면 데이터를 재요청\n      queryClient.invalidateQueries([\"getMessages\", roomId]);\n      console.log(\"메세지 저장 성공:\", data);\n    },\n    onError: (error) => {\n      console.error(\"메세지 저장 실패:\", error);\n    },\n  });\n\n  // 소켓\n  useEffect(() => {\n    if (!userEmail) return;\n\n    // Socket.IO 클라이언트 초기화\n    const socket = socketIOClient(API_ENDPOINT, {\n      //cors 체크\n      withCredentials: true,\n    });\n\n    socket.emit(\"setUserInfo\", {\n      email: email,\n      name: name,\n    });\n    console.log(\"setUserInfo: \", email, name);\n\n    socket.emit(\"joinRoom\", roomId, email);\n\n    // 서버로부터 메시지를 받으면 상태 업데이트\n    const onReceiveMessage = (data) => {\n      const { name, message } = data;\n      setMessages((prevMessages) => [...prevMessages, { name, message }]);\n\n      // 본인 확인\n      const isOwner = data.email === userEmail;\n      console.log(\"data.email:\", data.email, \"userEmail\", userEmail);\n      console.log(\"isOwner:\", isOwner, \"isVisible:\", isVisible);\n\n      // 새로운 메세지 도착하면 알림\n      if (!isOwner && !isVisibleRef.current) {\n        setNewMessageArrived(true);\n        queryClient.invalidateQueries(\"getMessages\"); // 새로운 메세지 도착시 채팅 내용 가져오기\n      }\n    };\n\n    socket.on(\"receiveMessage\", (data) => {\n      onReceiveMessage(data);\n      queryClient.invalidateQueries(\"getMessages\");\n    }); // TODO: 수정됨\n\n    socketRef.current = socket;\n\n    // 소켓 연결 종료\n    return () => {\n      socket.off(\"receiveMessage\", onReceiveMessage);\n      socketRef.current.disconnect();\n    };\n  }, [roomId, email, name]);\n\n  // 메세지 엡뎃 확인용\n  useEffect(() => {\n    console.log(\n      \"Updated messages:\",\n      messages,\n      \"UpdatednewMessageArrived:\",\n      newMessageArrived,\n    );\n  }, [messages, newMessageArrived]);\n\n  // 채팅창 열기\n  const handleToggleChat = () => {\n    setNewMessageArrived(false);\n    setIsVisible((prevIsVisible) => !prevIsVisible); // isVisible 상태 토글\n  };\n\n  // 채팅 메세지 전송\n  const handleSendMessage = async (e) => {\n    if (e) e.preventDefault();\n    if (message.trim() === \"\") return;\n\n    const data = { email, name, message };\n    console.log(\"handleSendMessage: \", data);\n\n    try {\n      const result = await sendMessageMutation.mutateAsync(data);\n      if (result.success) {\n        setMessage(\"\");\n      }\n    } catch (error) {\n      console.error(\"메세지 전송 오류:\", error);\n    }\n  };\n\n  // textarea 엔터 키 전송\n  const handleTextareaKeyPress = (e) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  // 채팅창 열림 여부 최신 상태 업뎃 유지\n  const isVisibleRef = useRef(isVisible);\n  useEffect(() => {\n    isVisibleRef.current = isVisible;\n    console.log(\"isVisible:\", isVisible); // isVisible 상태 확인용\n  }, [isVisible]);\n\n  // 접속자 창 toggle\n  const toggleUserList = () => {\n    setShowUserList((prev) => !prev);\n  };\n\n  return (\n    <div className=\"chat_container\">\n      {isVisible && (\n        <div className=\"chat-inner\">\n          <div className=\"chat-content\">\n            <div className=\"chat-top\">\n              <h4>채팅</h4>\n              <div className=\"top_right\">\n                <span>\n                  <BiSearch />\n                </span>\n                <span onClick={toggleUserList}>\n                  <BiSolidUser />\n                </span>\n              </div>\n            </div>\n            <div className=\"msg-wrap\">\n              {messages.map((msg, index) => (\n                <div\n                  key={index}\n                  className={`message ${\n                    msg.email === userEmail ? \"msg_right\" : \"msg_left\"\n                  }`}\n                >\n                  {msg.email === userEmail ? \"\" : <strong>{msg.name}</strong>}\n\n                  <span>{msg.message}</span>\n                </div>\n              ))}\n            </div>\n            <div className=\"msg-form\">\n              <form onSubmit={handleSendMessage}>\n                <textarea\n                  value={message}\n                  autoFocus={true}\n                  onChange={(e) => setMessage(e.target.value)}\n                  onKeyPress={handleTextareaKeyPress}\n                ></textarea>\n                <button type=\"submit\">전송</button>\n              </form>\n            </div>\n          </div>\n          {showUserList && <ChatUserList userName={userName} />}\n        </div>\n      )}\n      {/* TODO: 알림 애니메이션 수정 필요 */}\n      <button\n        className={`chat-button ${isVisible ? \"close\" : \"open\"} ${\n          newMessageArrived && \"bounce-animation\"\n        }`}\n        onClick={handleToggleChat}\n      >\n        {isVisible ? <IoIosCloseCircleOutline /> : <BsChatSquareDots />}\n        {newMessageArrived && <span className=\"notification\">!</span>}\n      </button>\n    </div>\n  );\n};\n\nexport default Chat;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}