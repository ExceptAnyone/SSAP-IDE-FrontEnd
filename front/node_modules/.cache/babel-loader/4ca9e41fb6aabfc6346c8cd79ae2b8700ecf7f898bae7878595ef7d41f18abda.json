{"ast":null,"code":"import _objectSpread from\"/Users/seongsuk/SSAP-IDE-FrontEnd/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/seongsuk/SSAP-IDE-FrontEnd/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{DndProvider}from\"react-dnd\";import{ThemeProvider,CssBaseline}from\"@mui/material\";import Button from\"@mui/material/Button\";import AddIcon from\"@mui/icons-material/Add\";import{Tree,MultiBackend,getDescendants,getBackendOptions}from\"@minoru/react-dnd-treeview\";import{CustomNode}from\"./customNode/CustomNode\";import{CustomDragPreview}from\"./customDragPreview/CustomDragPreview\";import{AddDialog}from\"./addDialog/AddDialog\";import{theme}from\"./theme\";import styles from\"./Sidebar.css\";import{useDispatch,useSelector}from\"react-redux\";import{addFile,addFolder,deleteFileOrFolder,selectFile,setCurrentEditingFile,setTreeData}from\"../../fileSlice/FileSlice\";import{deleteFolderAPI}from\"../../../../api/ideAPI/deleteFolderAPI\";import{useMutation}from\"react-query\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Sidebar(){var filesAndFolders=useSelector(function(state){return state.file.data;});var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),forceUpdate=_useState4[1];useEffect(function(){forceUpdate({});},[filesAndFolders]);var handleFileClick=function handleFileClick(node){// 클릭한 파일의 ID와 내용\nvar clickedFileId=node.id;var clickedFileContent=node.content||\"\";// 예: 초기 파일 내용 설정\n// 편집 중인 파일 정보를 업데이트\ndispatch(setCurrentEditingFile({id:clickedFileId,content:clickedFileContent}));// 선택된 파일의 ID를 설정 (새로 추가된 부분)\ndispatch(selectFile(clickedFileId));};var handleDrop=function handleDrop(newTree){dispatch(setTreeData(newTree));};var deleteFolderMutation=useMutation(deleteFolderAPI,{onSuccess:function onSuccess(data,folderId){dispatch(deleteFileOrFolder(folderId));},// 에러가 발생한 경우의 처리\nonError:function onError(error){console.error(\"폴더 삭제 실패\",error.message);}});var handleDelete=function handleDelete(folderId){deleteFolderMutation.mutate(folderId);};var handleCopy=function handleCopy(id){// Handle node copy logic\n// TODO\n};var handleOpenDialog=function handleOpenDialog(){// Handle open dialog logic\n// TODO\n};var handleCloseDialog=function handleCloseDialog(){// Handle close dialog logic\n// TODO\n};var handleSubmit=function handleSubmit(newNode){// newNode의 type에 따라 addFile 또는 addFolder 액션을 dispatch\nif(newNode.type===\"file\"){dispatch(addFile(newNode));}else{dispatch(addFolder(newNode));}};console.log(\"filesAndFolders\",filesAndFolders);return/*#__PURE__*/_jsxs(ThemeProvider,{theme:theme,children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(DndProvider,{backend:MultiBackend,options:getBackendOptions(),children:/*#__PURE__*/_jsxs(\"div\",{className:styles.app,children:[/*#__PURE__*/_jsx(\"div\",{children:open&&/*#__PURE__*/_jsx(AddDialog,{tree:filesAndFolders,onClose:handleCloseDialog,onSubmit:handleSubmit})}),/*#__PURE__*/_jsx(Tree,{tree:filesAndFolders,rootId:0,render:function render(node,options){return/*#__PURE__*/_jsx(CustomNode,_objectSpread(_objectSpread({node:node},options),{},{onDelete:handleDelete,onCopy:handleCopy,onClick:function onClick(){return handleFileClick(node);}}));},dragPreviewRender:function dragPreviewRender(monitorProps){return/*#__PURE__*/_jsx(CustomDragPreview,{monitorProps:monitorProps});},onDrop:handleDrop,classes:{root:styles.treeRoot,draggingSource:styles.draggingSource,dropTarget:styles.dropTarget}})]})})]});}export default Sidebar;","map":{"version":3,"names":["React","useEffect","useState","DndProvider","ThemeProvider","CssBaseline","Button","AddIcon","Tree","MultiBackend","getDescendants","getBackendOptions","CustomNode","CustomDragPreview","AddDialog","theme","styles","useDispatch","useSelector","addFile","addFolder","deleteFileOrFolder","selectFile","setCurrentEditingFile","setTreeData","deleteFolderAPI","useMutation","jsx","_jsx","jsxs","_jsxs","Sidebar","filesAndFolders","state","file","data","dispatch","_useState","_useState2","_slicedToArray","open","setOpen","_useState3","_useState4","forceUpdate","handleFileClick","node","clickedFileId","id","clickedFileContent","content","handleDrop","newTree","deleteFolderMutation","onSuccess","folderId","onError","error","console","message","handleDelete","mutate","handleCopy","handleOpenDialog","handleCloseDialog","handleSubmit","newNode","type","log","children","backend","options","className","app","tree","onClose","onSubmit","rootId","render","_objectSpread","onDelete","onCopy","onClick","dragPreviewRender","monitorProps","onDrop","classes","root","treeRoot","draggingSource","dropTarget"],"sources":["/Users/seongsuk/SSAP-IDE-FrontEnd/front/src/components/ide/ideUI/sideBar/Sidebar.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { DndProvider } from \"react-dnd\";\nimport { ThemeProvider, CssBaseline } from \"@mui/material\";\nimport Button from \"@mui/material/Button\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport {\n  Tree,\n  MultiBackend,\n  getDescendants,\n  getBackendOptions,\n} from \"@minoru/react-dnd-treeview\";\nimport { CustomNode } from \"./customNode/CustomNode\";\nimport { CustomDragPreview } from \"./customDragPreview/CustomDragPreview\";\nimport { AddDialog } from \"./addDialog/AddDialog\";\nimport { theme } from \"./theme\";\nimport styles from \"./Sidebar.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  addFile,\n  addFolder,\n  deleteFileOrFolder,\n  selectFile,\n  setCurrentEditingFile,\n  setTreeData,\n} from \"../../fileSlice/FileSlice\";\nimport { deleteFolderAPI } from \"../../../../api/ideAPI/deleteFolderAPI\";\nimport { useMutation } from \"react-query\";\n\nfunction Sidebar() {\n  const filesAndFolders = useSelector((state) => state.file.data);\n  const dispatch = useDispatch();\n  const [open, setOpen] = useState(false);\n  const [, forceUpdate] = useState();\n\n  useEffect(() => {\n    forceUpdate({});\n  }, [filesAndFolders]);\n  const handleFileClick = (node) => {\n    // 클릭한 파일의 ID와 내용\n    const clickedFileId = node.id;\n    const clickedFileContent = node.content || \"\"; // 예: 초기 파일 내용 설정\n\n    // 편집 중인 파일 정보를 업데이트\n    dispatch(\n      setCurrentEditingFile({ id: clickedFileId, content: clickedFileContent }),\n    );\n\n    // 선택된 파일의 ID를 설정 (새로 추가된 부분)\n    dispatch(selectFile(clickedFileId));\n  };\n\n  const handleDrop = (newTree) => {\n    dispatch(setTreeData(newTree));\n  };\n\n  const deleteFolderMutation = useMutation(deleteFolderAPI, {\n    onSuccess: (data, folderId) => {\n      dispatch(deleteFileOrFolder(folderId));\n    },\n\n    // 에러가 발생한 경우의 처리\n    onError: (error) => {\n      console.error(\"폴더 삭제 실패\", error.message);\n    },\n  });\n\n  const handleDelete = (folderId) => {\n    deleteFolderMutation.mutate(folderId);\n  };\n\n  const handleCopy = (id) => {\n    // Handle node copy logic\n    // TODO\n  };\n\n  const handleOpenDialog = () => {\n    // Handle open dialog logic\n    // TODO\n  };\n\n  const handleCloseDialog = () => {\n    // Handle close dialog logic\n    // TODO\n  };\n\n  const handleSubmit = (newNode) => {\n    // newNode의 type에 따라 addFile 또는 addFolder 액션을 dispatch\n    if (newNode.type === \"file\") {\n      dispatch(addFile(newNode));\n    } else {\n      dispatch(addFolder(newNode));\n    }\n  };\n\n  console.log(\"filesAndFolders\", filesAndFolders);\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <DndProvider backend={MultiBackend} options={getBackendOptions()}>\n        <div className={styles.app}>\n          <div>\n            {open && (\n              <AddDialog\n                tree={filesAndFolders}\n                onClose={handleCloseDialog}\n                onSubmit={handleSubmit}\n              />\n            )}\n          </div>\n          <Tree\n            tree={filesAndFolders}\n            rootId={0}\n            render={(node, options) => (\n              <CustomNode\n                node={node}\n                {...options}\n                onDelete={handleDelete}\n                onCopy={handleCopy}\n                onClick={() => handleFileClick(node)}\n              />\n            )}\n            dragPreviewRender={(monitorProps) => (\n              <CustomDragPreview monitorProps={monitorProps} />\n            )}\n            onDrop={handleDrop}\n            classes={{\n              root: styles.treeRoot,\n              draggingSource: styles.draggingSource,\n              dropTarget: styles.dropTarget,\n            }}\n          />\n        </div>\n      </DndProvider>\n    </ThemeProvider>\n  );\n}\n\nexport default Sidebar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}